# CCUsageMac 動作確認手順

## 1. アプリケーションの起動

### コマンドラインから起動
```bash
cd CCUsageMac
.build/release/CCUsageMac
```

### Finderから起動（推奨）
1. Finderで `CCUsageMac/.build/release/` を開く
2. `CCUsageMac` をダブルクリック
3. 初回起動時は「開発元を検証できないため開けません」と表示される場合があります
   - システム設定 > プライバシーとセキュリティ > セキュリティ
   - 「"CCUsageMac"は開発元を確認できないため、使用がブロックされました」の横の「このまま開く」をクリック

## 2. 動作確認ポイント

### メニューバーの確認
1. 画面上部のメニューバーに脳のアイコン（🧠）と金額が表示されることを確認
2. 初回起動時は「$0.00」または「$--」と表示される可能性があります

### Claude Codeのデータ確認
アプリが正しく動作するには、Claude Codeの使用履歴が必要です：

```bash
# Claude Codeのデータディレクトリを確認
ls -la ~/.claude/projects/
```

データがない場合は、Claude Codeを使用してから再度確認してください。

### 詳細表示の確認
1. メニューバーのアイコンをクリック
2. ポップオーバーウィンドウが表示されることを確認
3. 以下の情報が表示されます：
   - Total Cost（今日の合計使用料金）
   - Token Usage（トークン使用量の内訳）
   - Models Used（使用したモデル）
   - 最終更新時刻

### 更新機能の確認
1. ポップオーバー右上の更新ボタン（🔄）をクリック
2. データが再読み込みされることを確認
3. 自動更新は5分ごとに実行されます

## 3. トラブルシューティング

### 金額がccusageと異なる場合
- CCUsageMacは、ローカルタイムゾーン（日本時間）での「今日」のデータを集計します
- JSONLファイルのタイムスタンプはUTC形式のため、日付の境界で若干の差異が生じる可能性があります
- より正確な日別集計が必要な場合は、ccusageコマンドラインツールの使用を推奨します

### 「$--」と表示される場合
- エラーが発生しています。ポップオーバーを開いてエラー内容を確認してください
- よくある原因：
  - Claude Codeがインストールされていない
  - `~/.claude/projects/` ディレクトリが存在しない
  - 今日のデータがまだない

### アプリが起動しない場合
```bash
# 直接実行してエラーを確認
./CCUsageMac/.build/release/CCUsageMac
```

### データが更新されない場合
1. Claude Codeで何か作業を行う
2. 手動で更新ボタンをクリック
3. それでも更新されない場合は、アプリを再起動

### アプリを終了する方法
1. ポップオーバーを開く
2. 右下の「Quit」ボタンをクリック

## 4. ログの確認

問題が発生した場合、コンソールアプリでログを確認：

1. アプリケーション > ユーティリティ > コンソール.app を開く
2. 左側のリストから自分のMacを選択
3. 検索欄に「CCUsageMac」と入力
4. エラーメッセージを確認

## 5. アンインストール

アプリを削除する場合：
```bash
# プロセスを終了
pkill CCUsageMac

# ファイルを削除（ビルドしたバイナリのみの場合）
rm CCUsageMac/.build/release/CCUsageMac
```